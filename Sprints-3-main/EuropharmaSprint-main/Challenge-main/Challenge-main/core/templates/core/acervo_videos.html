<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acervo de VÃ­deos</title>

    <link rel="stylesheet" type="text/css" href="../../static/core/style_acervoDeVideos.css"> 

</head>
<body>

    <!-- BotÃ£o de menu -->
    <div class="open-sidebar" onclick="toggleSidebar()">&#9776;</div>

    <!-- Menu deslizante -->
    <div id="sidebar" class="sidebar">
        <!-- BotÃ£o para fechar o menu -->
        <a href="javascript:void(0)" class="closebtn" onclick="toggleSidebar()">&times;</a>

        <!-- ConteÃºdo do menu -->
        <div class="menu-title">Nome do Treinamento</div>
        <div class="submenu-title">Nome do Primeiro MÃ³dulo</div>
        <a href="#" class="submenu-item">Aulas</a>
        <a href="#" class="submenu-item">Materiais</a>
        <a href="#" class="submenu-item">ExercÃ­cios</a>
        
        <div class="submenu-title">Nome do Segundo MÃ³dulo</div>
        <a href="#" class="submenu-item">Aulas</a>
        <a href="#" class="submenu-item">Materiais</a>
    </div>

    <div class="header">
        &emsp;
        <span>ðŸ‘¤ Nome_user___</span>
    </div>

    <h1 style="text-align: center; margin-top: 80px;">Acervo de VÃ­deos</h1>

    <!-- Filtro de setor -->
    <form method="GET" action="{% url 'acervo_videos' %}">
        <label for="setor">Filtrar por setor:</label>
        <select name="setor" id="setor" style="width: 20%;">
            <option value="">Todos os setores</option>
            {% for setor in setores %}
                <option value="{{ setor.id }}" {% if setor.id|stringformat:"s" == request.GET.setor %}selected{% endif %}>{{ setor.nome_setor }}</option>
            {% endfor %}
        </select>
        <button type="submit">Filtrar</button>
    </form>

    <h2>Lista de VÃ­deos</h2>

    <div class="video-container">
        {% for video in videos %}
            <div class="video-item">
                <h3>{{ video.nome_video }} - Setor: {{ video.setor.nome_setor }} - MÃ³dulo: {{ video.modulo.nome_modulo }} </h3>
                <p>{{ video.descricao }}</p>
                
                <!-- Exibe o vÃ­deo usando um iframe -->
                <iframe width="560" height="315" src="{{ video.url_video }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

                <!-- BotÃ£o de deletar vÃ­deo -->
                <form method="POST" action="{% url 'deletar_video' video.id %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn" onclick="return confirm('Tem certeza que deseja excluir este vÃ­deo?')">Deletar</button>
                </form>
            </div>
        {% endfor %}
    </div>

    <div >
        <button class="btn"><a href="{% url 'index' %}">Voltar para o inicio</a></button>
        
    </div>

    <script>
        // FunÃ§Ã£o para abrir e fechar o menu
        function toggleSidebar() {
            document.getElementById("sidebar").classList.toggle("active");
        }
    </script>

</body>
</html>